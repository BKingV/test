import streamlit as st

# Словарь с вопросами по темам
topics = {
    "50 Нормативные правовые акты по профессиональной деятельности": [
        {
            "number": "1",
            "question": "Часть технических потерь в электрических сетях, не зави-сящая от передаваемой мощности, это… (Постановление Минэнерго от 30.12.2008 г № 326)",
            "options": [
                "условно-постоянные потери",
                "потери, обусловленные допустимой погрешностью измерительного комплекса",
                "нагрузочные потери",
                "потери, обусловленные физическими процессами в оборудовании при передаче электроэнергии"
            ],
            "correct": "условно-постоянные потери"
        },
        {
            "number": "2",
            "question": "По снижению расхода топливно-энергетических ресурсов в ПАО «ММК» ежегодно разрабатывается... (ПД СМК ММК ЦЭСТ-04)",
            "options": [
                "приказ",
                "информационное письмо",
                "распоряжение",
                "указ"
            ],
            "correct": "приказ"
        },
        {
            "number": "3",
            "question": "Параметры качества электрической энергии регламентируются… (ГОСТ 32144-2013)",
            "options": [
                "ГОСТом",
                "ТУ",
                "распоряжением",
                "заданием"
            ],
            "correct": "ГОСТом"
        },
        {
            "number": "4",
            "question": "Обязательным условием при включении мероприятия в Программу по энергосбережению является… (ПД СМК ММК ЦЭСТ-04)",
            "options": [
                "Планирование денежных средств на его реализацию в бюджете на следующий год",
                "Прогноз объемов электропотребления",
                "Акт аварийной брони",
                "Сводка отпуска электроэнергии"
            ],
            "correct": "Планирование денежных средств на его реализацию в бюджете на следующий год"
        },
        {
            "number": "5",
            "question": "Правовые основы экономических отношений в сфере электроэнергетики а также права и обязанности субъектов электроэнергетики определяет",
            "options": [
                "Федеральный закон № 35-ФЗ Об электроэнергетике",
                "Гражданский кодекс РФ",
                "Конституция РФ",
                "Федеральная антимонопольная служба РФ"
            ],
            "correct": "Федеральный закон № 35-ФЗ Об электроэнергетике"
        },
        {
            "number": "6",
            "question": "Подключение потребителя к электрическим сетям осуществляет… (Постановление Пр-ва РФ от 27.12.2004 г. № 861)",
            "options": [
                "сетевая организация",
                "энергоснабжающая организация",
                "сбытовая организация",
                "гарантирующий поставщик"
            ],
            "correct": "сетевая организация"
        },
        {
            "number": "7",
            "question": "Ответственность за электрические сети и их эксплуатацию определяется… (Постановление Пр-ва РФ от 27.12.2004 г. № 861)",
            "options": [
                "актом разграничения эксплуатационной ответственности сторон",
                "актом аварийной брони",
                "распоряжением структурного подразделения",
                "актом преддоговорного обследования"
            ],
            "correct": "актом разграничения эксплуатационной ответственности сторон"
        },
        {
            "number": "8",
            "question": "Технические условия на подключение электрооборудования к сетям ПАО «ММК» выдаёт… (СТО СМК ММК ЦЭСТ-01)",
            "options": [
                "УГЭ",
                "ЦЭТЛ",
                "ЦЭСиП",
                "ЦЭСТ"
            ],
            "correct": "УГЭ"
        },
        {
            "number": "9",
            "question": "Присвоение группы по электробезопасности 2 и выше производится… (ПТЭЭП)",
            "options": [
                "аттестационной комиссией",
                "путем проведения инструктажа с проверкой знаний в форме устного опроса",
                "путем проведения инструктажа",
                "путем проведения проверки знаний в форме устного опроса"
            ],
            "correct": "аттестационной комиссией"
        },
        {
            "number": "10",
            "question": "Величина аварийной брони – это… (Приказ Минэнерго России от 06.06.2013 N 290)",
            "options": [
                "наименьшая потребляемая мощность объектов потребителя с остановленным технологическим процессом, обеспечивающим их безопасное состояние",
                "нулевое электропотребление предприятия из энергосистемы",
                "остановка технологического процесса",
                "использование УБП при аварийных отключениях"
            ],
            "correct": "наименьшая потребляемая мощность объектов потребителя с остановленным технологическим процессом, обеспечивающим их безопасное состояние"
        },
        {
            "number": "11",
            "question": "Величина технологической брони – это… (Приказ Минэнерго России от 06.06.2013 N 290)",
            "options": [
                "наименьшая потребляемая мощность и продолжительность времени, необходимые для завершения технологического процесса",
                "время для остановки электрооборудования",
                "потребляемая мощность предприятия в аварийном режиме",
                "потребляемая мощность предприятия в технологическом процессе"
            ],
            "correct": "наименьшая потребляемая мощность и продолжительность времени, необходимые для завершения технологического процесса"
        },
        {
            "number": "12",
            "question": "Количество очередей в графике аварийного ограничения электроснабжения предприятия составляет… (Приказ Минэнерго России от 06.06.2013 N 290)",
            "options": [
                "10",
                "5",
                "15",
                "20"
            ],
            "correct": "10"
        },
        {
            "number": "13",
            "question": "Первая группа по электробезопасности присваивается… (Правил по охране труда при эксплуатации электроустановок)",
            "options": [
                "не электротехническому персоналу, выполняющему работы, при которых может возникнуть опасность поражения электрическим током",
                "электротехническому персоналу, выполняющему работы, при которых может возникнуть опасность поражения электрическим током",
                "не электротехническому персоналу, выполняющему работы в электроустановках до 1000 В",
                "не электротехническому персоналу, выполняющему работы в электроустановках свыше 1000 В"
            ],
            "correct": "не электротехническому персоналу, выполняющему работы, при которых может возникнуть опасность поражения электрическим током"
        },
        {
            "number": "14",
            "question": "Присвоение 1 группы по электробезопасности производится… (Правил по охране труда при эксплуатации электроустановок)",
            "options": [
                "путем проведения инструктажа с проверкой знаний в форме устного опроса",
                "аттестационной комиссией",
                "путем проведения инструктажа",
                "путем проведения проверки знаний в форме устного опроса"
            ],
            "correct": "путем проведения инструктажа с проверкой знаний в форме устного опроса"
        },
        {
            "number": "15",
            "question": "Присвоение I группы по электробезопасности проводится… (Правил по охране труда при эксплуатации электроустановок)",
            "options": [
                "работником из числа электротехнического персонала, имеющего группу III по электробезопасности",
                "работником из числа администрации организации, имеющего группу по электробезопасности не ниже IV, назначенным распоряжением руководителя организации.",
                "ответственным за электрохозяйство предприятия, имеющего группу по электробезопасности не ниже V, назначенным приказом генерального директора предприятия.",
                "работником административно-хозяйственной бригады, выполняющим работы по техническому обслуживанию электрооборудования подразделения."
            ],
            "correct": "работником из числа электротехнического персонала, имеющего группу III по электробезопасности"
        },
        {
            "number": "16",
            "question": "Энергопринимающее устройство - … (Федеральный закон 35-ФЗ Об электроэнергетике)",
            "options": [
                "аппарат, агрегат, оборудование либо объединённая электрической связью их совокупность, которые предназначены для преобразования электрической энергии в другой вид энергии для ее потребления",
                "объекты, непосредственно используемые в процессе производства и оперативно-диспетчерского управления в электроэнергетике",
                "оборудование, предназначенное для обеспечения электрических связей и осуществления передачи электрической энергии",
                "объект электросетевого хозяйства"
            ],
            "correct": "аппарат, агрегат, оборудование либо объединённая электрической связью их совокупность, которые предназначены для преобразования электрической энергии в другой вид энергии для ее потребления"
        },
        {
            "number": "17",
            "question": "Объекты электросетевого хозяйства - … (Федеральный закон 35-ФЗ Об электроэнергетике)",
            "options": [
                "линии электропередач, трансформаторные и иные подстанции, распределительные пункты и иное оборудование, предназначенное для обеспечения электрических связей и осуществления передачи электрической энергии",
                "объекты, непосредственно используемые в процессе производства и оперативно-диспетчерского управления в электроэнергетике",
                "энергопринимающее устройство",
                "оборудование, предназначенное для преобразования электрической энергии в другой вид энергии"
            ],
            "correct": "линии электропередач, трансформаторные и иные подстанции, распределительные пункты и иное оборудование, предназначенное для обеспечения электрических связей и осуществления передачи электрической энергии"
        },
        {
            "number": "18",
            "question": "Приближение людей к токоведущим частям электроустановок, находящихся под напряжением до 1 кВ, допускается на расстояние… (Правила по охране труда при эксплуатации электроустановок)",
            "options": [
                "не нормируется",
                "1,0 м",
                "1,5 м",
                "0,5 м"
            ],
            "correct": "не нормируется"
        },
        {
            "number": "19",
            "question": "Для определения количества электрической энергии используются приборы учета, типы которых… (СТО СМК ММК ЦЭСТ-01)",
            "options": [
                "утверждены Федеральным агентством по техническому регулированию и метрологии и внесены в Государственный реестр",
                "утверждены Федеральным агентством по техническому регулированию и метрологии",
                "внесены в Государственный реестр",
                "выпускаются отечественными заводами-изготовителями"
            ],
            "correct": "утверждены Федеральным агентством по техническому регулированию и метрологии и внесены в Государственный реестр"
        },
        {
            "number": "20",
            "question": "Потребители электрической энергии - … (Федеральный закон 35-ФЗ Об электроэнергетике)",
            "options": [
                "лица, приобретающие электрическую энергию для собственных бытовых и (или) производственных нужд",
                "электрические устройства, присоединенные к электрическим сетям",
                "лица, реализующие электрическую энергию на розничных рынках",
                "распределительные пункты и иное оборудование, предназначенное для осуществления передачи электрической энергии"
            ],
            "correct": "лица, приобретающие электрическую энергию для собственных бытовых и (или) производственных нужд"
        },
        {
            "number": "21",
            "question": "В пределах какой мощности сетевая организация принимает на себя обязательства по обеспечить передачу электрической энергии (Постановление Пр-ва РФ от 27.12.2004 г. № 861)?",
            "options": [
                "максимальной мощности",
                "присоединенной мощности",
                "заявленной мощности",
                "установленной мощности"
            ],
            "correct": "максимальной мощности"
        },
        {
            "number": "22",
            "question": "Точка поставки на розничном рынке это … (Постановление Правительства РФ от 04.05.2012 №442)",
            "options": [
                "место исполнения обязательств по договорам, используемое для определения объема взаимных обязательств субъектов розничных рынков по указанным договорам",
                "точка присоединения объектов электросетевого хозяйства",
                "место установки счетчика электрической энергии",
                "точка учета электрической энергии"
            ],
            "correct": "место исполнения обязательств по договорам, используемое для определения объема взаимных обязательств субъектов розничных рынков по указанным договорам"
        },
        {
            "number": "23",
            "question": "Привила организации учета электрической энергии на розничных рынках определены …",
            "options": [
                "Постановлением Правительства РФ №442 О функционировании розничных рынков электрической энергии",
                "Федеральным законом об электроэнергетике №35-ФЗ",
                "Постановлением Правительства РФ №1178 О ценообразовании в области регулируемых цен в электроэнергетике",
                "Правилами технологического функционирования электроэнергетических систем, ПП РФ №937"
            ],
            "correct": "Постановлением Правительства РФ №442 О функционировании розничных рынков электрической энергии"
        },
        {
            "number": "24",
            "question": "Средневзвешенный коэффициент мощности – это… (И ЦЭСТ 3-10-03)",
            "options": [
                "отношение реактивной энергии к активной",
                "отношение активной энергии к реактивной",
                "отношение максимальной мощности к средней",
                "отношение средней нагрузки к максимальной"
            ],
            "correct": "отношение реактивной энергии к активной"
        },
        {
            "number": "25",
            "question": "При неисполнении или ненадлежащем исполнении потребителем обязательств по оплате энергоресурсов и услуг… (ПД СМК ММК УОЗ-01)",
            "options": [
                "вводится ограничение и прекращение режима потребления энергоресурсов",
                "вводится корректировка объемов потребления",
                "производиться демонтаж оборудования",
                "долг переносится на следующий расчетный период"
            ],
            "correct": "вводится ограничение и прекращение режима потребления энергоресурсов"
        },
        {
            "number": "26",
            "question": "В случае отсутствия приборов учета электроэнергии величина максимальной мощности, при которой допускается объем электропотребления определять расчетным способом составляет (Постановление Правительства РФ от 04.05.2012 №442, п.185)",
            "options": [
                "5 кВт",
                "670 кВт",
                "150 кВт",
                "20 кВт"
            ],
            "correct": "5 кВт"
        },
        {
            "number": "27",
            "question": "Кто обязан обеспечивать коммерческий учет электрической энергии на розничных рынках (Федеральный закон 35-ФЗ Об электроэнергетике)?",
            "options": [
                "сетевые организации",
                "гарантирующий поставщик",
                "потребитель электрической энергии",
                "коммерческий оператор"
            ],
            "correct": "сетевые организации"
        },
        {
            "number": "28",
            "question": "Контрольная пломба и (или) знаки визуального контроля устанавливаются… (Постановление Правительства РФ от 04.05.2012 №442)",
            "options": [
                "сетевой организацией",
                "производителем электрической энергии",
                "потребителем",
                "лицензированной организацией"
            ],
            "correct": "сетевой организацией"
        },
        {
            "number": "29",
            "question": "Электроустановка, предназначенная для приема, преобразования и распределения электрической энергии, состоящая из трансформаторов или других преобразователей электрической энергии – это… (ГОСТ 24291-90)",
            "options": [
                "электрическая подстанция",
                "защитное заземление",
                "электрозащитное средство",
                "воздушная линия электропередачи"
            ],
            "correct": "электрическая подстанция"
        },
        {
            "number": "30",
            "question": "Основанием для оформления приложений к договору электроснабжения является… (ПД СМК ММК УОЗ-01)",
            "options": [
                "заявка потребителя на имя начальника УОЗ",
                "акт аварийной брони потребителя",
                "акт разграничения балансовой принадлежности",
                "заявка потребителя на объемы электропотребления"
            ],
            "correct": "заявка потребителя на имя начальника УОЗ"
        }
    ]
}

# Инициализируем состояние для хранения ответов
if "answers" not in st.session_state:
    st.session_state.answers = {}

st.title("Онлайн тест по вопросам 50, 51 и 52")

# Выбор темы через сайдбар
selected_topic = st.sidebar.selectbox("Выберите тему теста", list(topics.keys()))
st.header(selected_topic)

for q in topics[selected_topic]:
    st.write(f"**Вопрос {q['number']}:** {q['question']}")
    # Если правильных ответов несколько (и их больше одного), используем multiselect
    if isinstance(q["correct"], list) and len(q["correct"]) > 1:
        user_answer = st.multiselect("Выберите один или несколько вариантов:", q["options"], key=f"{selected_topic}_{q['number']}")
    else:
        user_answer = st.radio("Выберите ответ:", q["options"], key=f"{selected_topic}_{q['number']}")
    st.session_state.answers[f"{selected_topic}_{q['number']}"] = user_answer
    st.write("---")

if st.button("Проверить ответы"):
    score = 0
    total = len(topics[selected_topic])
    for q in topics[selected_topic]:
        key = f"{selected_topic}_{q['number']}"
        correct_answer = q["correct"]
        user_answer = st.session_state.answers.get(key)
        if isinstance(correct_answer, list):
            if set(user_answer) == set(correct_answer):
                score += 1
        else:
            if user_answer == correct_answer:
                score += 1
    st.write(f"Ваш результат по теме **{selected_topic}**: **{score} из {total}**")
